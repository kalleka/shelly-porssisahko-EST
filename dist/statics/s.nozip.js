let URL="",URLS="",qs=t=>document.querySelector(t),DBG=()=>{},STATE_STR=["Käivitamine","Käsitsi lülitamine","Hind alla piirmäära","Hind üle piirmäära","Hind ei ole sellel perioodil soodsaim","Hind on sellel perioodil soodsaim",'Hind soodsam kui "alati sees" piirmäär',"Lülitus hinnainfo puudumisel (kell paigas)","Rikkekaitse (Shelly kellaaeg teadmata)","Käsitsi lülitatus (kuni %s)","Käsitsi määratud tund","Hind üle maksimumpiiri","Kasutaja lisaskripti poolt seatud","Määratud lülitusminutid läbi"],MODE_STR=["Käsitsi lülitamine","Hinnapiir","Perioodi soodsaimad tunnid"],state=void 0,CBS=[],me=()=>"",openTab=async t=>{void 0!==t&&""!==t||(t="tab-status"),window.location.hash=t;var a=qs("#"+t);a&&(a.checked=!0),""===qs("#c-"+t).innerHTML&&await populateDynamicData(t+".html","#c-"+t)},evalContainerScriptTags=(window.onload=async()=>{openTab(window.location.hash.substring(1+window.location.hash.indexOf("#")))},document.querySelectorAll(".ts").forEach(t=>t.addEventListener("change",t=>{openTab(t.target.id)})),elementId=>{for(var scripts=qs(elementId).querySelectorAll("script"),i=0;i<scripts.length;i++)scripts[i].innerText?eval(scripts[i].innerText):fetch(scripts[i].src).then(function(data){data.text().then(function(r){eval(r)})}),scripts[i].parentNode.removeChild(scripts[i])}),populateDynamicData=async(t,a)=>{try{DEV||(t=URLS+"?r="+t.replace("tab-","").replace(".html",""));var i=await getData(t,!1);i.ok?(qs(a).innerHTML=i.data,evalContainerScriptTags(a)):qs(a).innerHTML="Error getting data: "+i.txt}catch(t){console.error(t)}},getData=async(a,i=!0)=>{try{var e=await fetch(a);if(e.ok){let t=null;return 204!==e.status&&(t=i?await e.json():await e.text()),e.status,{ok:!0,code:e.status,txt:e.statusText,data:t}}return console.error(a+": "+e.statusText),{ok:!1,code:e.status,txt:`${a}: ${e.statusText} (${await e.text()})`,data:null}}catch(t){return console.error(`${a}: (${JSON.stringify(t)})`),{ok:!1,code:-1,txt:`${a}: (${JSON.stringify(t)})`,data:null}}},formatDate=t=>`${t.getDate().toString().padStart(2,"0")}.${(""+(1+t.getMonth())).padStart(2,"0")}.`+t.getFullYear(),formatTime=(t,a=!0,i=!1)=>t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0")+(a?":"+t.getSeconds().toString().padStart(2,"0"):"")+(i?"."+t.getMilliseconds().toString().padStart(3,"0"):""),formatDateTime=(t,a=!0,i=!1)=>formatDate(t)+" "+formatTime(t,a,i),updateLoop=async()=>{qs("#spin").style.visibility="visible";try{var t=await getData(URLS+"?r=s");t.ok?state=t.data:503!==t.code&&(state=null),CBS.forEach(t=>t())}catch(t){console.error(t),state=null}finally{qs("#spin").style.visibility="hidden",setTimeout(updateLoop,1e4)}};DEV?reqJs("dev.js"):updateLoop();